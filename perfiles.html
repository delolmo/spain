<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparaci√≥n por perfiles: antes y despu√©s</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&display=swap');
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --bg: #070b14; --card: #0d1320; --border: #1a2236;
    --text: #d8dfe9; --muted: #7b8ba5; --dim: #4a5873;
    --blue: #3b82f6; --green: #22c55e; --red: #ef4444;
    --amber: #f59e0b; --cyan: #06b6d4; --purple: #a78bfa; --rose: #f43f5e;
  }
  body { font-family: 'IBM Plex Mono', monospace; background: var(--bg); color: var(--text); padding: 32px 24px; min-height: 100vh; }
  .container { max-width: 1200px; margin: 0 auto; }
  h1 { font-size: 13px; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: var(--blue); margin-bottom: 6px; }
  .subtitle { font-size: 11px; color: var(--dim); margin-bottom: 32px; line-height: 1.6; max-width: 900px; }

  /* Profile cards */
  .profiles-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 16px; margin-bottom: 32px; }
  .profile-card { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 20px; transition: border-color 0.2s; }
  .profile-card:hover { border-color: var(--blue); }
  .profile-card.winner { border-left: 3px solid var(--green); }
  .profile-card.neutral { border-left: 3px solid var(--amber); }
  .profile-card.loser { border-left: 3px solid var(--red); }

  .profile-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 14px; }
  .profile-icon { font-size: 24px; margin-right: 10px; line-height: 1; }
  .profile-name { font-size: 12px; font-weight: 700; color: var(--text); text-transform: uppercase; letter-spacing: 0.05em; }
  .profile-desc { font-size: 10px; color: var(--dim); margin-top: 2px; }
  .profile-badge { font-size: 13px; font-weight: 700; padding: 4px 10px; border-radius: 4px; white-space: nowrap; }
  .badge-green { background: rgba(34,197,94,0.12); color: var(--green); }
  .badge-red { background: rgba(239,68,68,0.12); color: var(--red); }
  .badge-amber { background: rgba(245,158,11,0.12); color: var(--amber); }

  .profile-row { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid var(--border); font-size: 11px; }
  .profile-row:last-child { border-bottom: none; }
  .profile-row .label { color: var(--muted); }
  .profile-row .before { color: var(--dim); text-decoration: line-through; }
  .profile-row .after { color: var(--text); font-weight: 600; }
  .profile-row .val { text-align: right; }

  .profile-note { font-size: 9px; color: var(--dim); margin-top: 10px; line-height: 1.5; border-top: 1px solid var(--border); padding-top: 10px; }

  /* Rights table */
  .section-title { font-size: 13px; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: var(--cyan); margin-bottom: 6px; margin-top: 40px; }
  .section-subtitle { font-size: 11px; color: var(--dim); margin-bottom: 20px; }

  .rights-table { width: 100%; border-collapse: collapse; background: var(--card); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; margin-bottom: 32px; }
  .rights-table th { text-align: left; padding: 10px 14px; font-size: 9px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--dim); background: var(--bg); border-bottom: 2px solid var(--border); font-weight: 600; }
  .rights-table td { padding: 10px 14px; font-size: 11px; border-bottom: 1px solid var(--border); vertical-align: top; line-height: 1.5; }
  .rights-table tr:last-child td { border-bottom: none; }
  .rights-table td:first-child { font-weight: 600; color: var(--text); white-space: nowrap; }
  .rights-table td:nth-child(2) { color: var(--dim); }
  .rights-table td:nth-child(3) { color: var(--green); }
  .rights-table .col-concept { width: 18%; }
  .rights-table .col-before { width: 41%; }
  .rights-table .col-after { width: 41%; }

  /* Summary section */
  .summary-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 32px; }
  @media (max-width: 800px) { .summary-grid { grid-template-columns: 1fr; } }
  .summary-card { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 18px; }
  .summary-card h3 { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 10px; }
  .summary-card.win h3 { color: var(--green); }
  .summary-card.draw h3 { color: var(--amber); }
  .summary-card.loss h3 { color: var(--red); }
  .summary-card ul { list-style: none; padding: 0; }
  .summary-card li { font-size: 11px; color: var(--muted); padding: 3px 0; line-height: 1.4; }
  .summary-card li::before { content: "‚Üí "; color: var(--dim); }

  /* Bar chart visual */
  .bar-section { margin-bottom: 32px; }
  .bar-row { display: flex; align-items: center; margin-bottom: 8px; gap: 10px; }
  .bar-label { width: 220px; font-size: 10px; color: var(--muted); text-align: right; flex-shrink: 0; }
  .bar-track { flex: 1; height: 28px; background: var(--card); border: 1px solid var(--border); border-radius: 4px; position: relative; overflow: hidden; }
  .bar-fill-before { position: absolute; top: 0; left: 0; height: 50%; background: var(--dim); opacity: 0.5; transition: width 0.6s ease; }
  .bar-fill-after { position: absolute; bottom: 0; left: 0; height: 50%; transition: width 0.6s ease; }
  .bar-fill-after.positive { background: var(--green); opacity: 0.7; }
  .bar-fill-after.negative { background: var(--red); opacity: 0.7; }
  .bar-fill-after.neutral { background: var(--amber); opacity: 0.5; }
  .bar-value { width: 100px; font-size: 11px; font-weight: 700; flex-shrink: 0; }
  .bar-value.positive { color: var(--green); }
  .bar-value.negative { color: var(--red); }
  .bar-value.neutral { color: var(--amber); }
  .bar-legend { display: flex; gap: 20px; margin-bottom: 16px; }
  .bar-legend-item { display: flex; align-items: center; gap: 6px; font-size: 10px; color: var(--muted); }
  .bar-legend-dot { width: 14px; height: 8px; border-radius: 2px; }

  @media (max-width: 700px) {
    .profiles-grid { grid-template-columns: 1fr; }
    .bar-label { width: 120px; font-size: 9px; }
    .rights-table { font-size: 10px; }
  }
</style>
</head>
<body>
<div class="container">

<h1>Comparaci√≥n por perfiles</h1>
<div class="subtitle">Antes y despu√©s del programa. El coste total para la empresa no cambia: las cotizaciones sociales (~30% empresa + ~6% trabajador) desaparecen y el trabajador recibe como bruto el 100% del coste empresa. IRPF: 25% hasta 20.000 ‚Ç¨, 55% a partir de ah√≠. ¬´Neto¬ª = dinero que el ciudadano ingresa tras todos los impuestos y cotizaciones.</div>

<!-- Visual bar chart -->
<div class="section-title" style="margin-top:0">Impacto en ingresos netos</div>
<div class="section-subtitle">Comparaci√≥n del dinero neto anual que percibe cada perfil</div>

<div class="bar-legend">
  <div class="bar-legend-item"><div class="bar-legend-dot" style="background:var(--dim);opacity:0.5"></div>Neto actual</div>
  <div class="bar-legend-item"><div class="bar-legend-dot" style="background:var(--green);opacity:0.7"></div>Neto programa (ganancia)</div>
  <div class="bar-legend-item"><div class="bar-legend-dot" style="background:var(--red);opacity:0.7"></div>Neto programa (p√©rdida)</div>
</div>

<div class="bar-section" id="bar-chart"></div>

<!-- Profile cards -->
<div class="section-title">Detalle por perfil</div>
<div class="section-subtitle">Desglose fiscal y notas de cada caso</div>

<div class="profiles-grid" id="profiles"></div>

<!-- Rights table -->
<div class="section-title">Impacto en derechos y servicios</div>
<div class="section-subtitle">Cambios que afectan a todos los perfiles por igual</div>

<table class="rights-table">
  <thead>
    <tr>
      <th class="col-concept">Concepto</th>
      <th class="col-before">Antes</th>
      <th class="col-after">Despu√©s</th>
    </tr>
  </thead>
  <tbody id="rights-body"></tbody>
</table>

<!-- Summary: who wins, who loses -->
<div class="section-title">¬øQui√©n gana y qui√©n pierde?</div>
<div class="section-subtitle">Resumen del impacto neto por grupo</div>

<div class="summary-grid">
  <div class="summary-card win">
    <h3>Ganan claramente</h3>
    <ul>
      <li>Familias con hijos</li>
      <li>Trabajadores con rentas bajas y medias</li>
      <li>Personas con discapacidad</li>
      <li>Pensionistas con pensi√≥n m√≠nima</li>
      <li>Aut√≥nomos con baja facturaci√≥n</li>
      <li>J√≥venes que acceden a la universidad</li>
    </ul>
  </div>
  <div class="summary-card draw">
    <h3>Aproximadamente igual</h3>
    <ul>
      <li>Pensionistas con pensi√≥n media (mismo neto, mejores servicios, pensi√≥n congelada a futuro)</li>
      <li>Asalariados medios sin hijos</li>
    </ul>
  </div>
  <div class="summary-card loss">
    <h3>Pierden en renta neta</h3>
    <ul>
      <li>Rentas altas (&gt;60.000 ‚Ç¨ bruto actual)</li>
      <li>Aut√≥nomos establecidos con facturaci√≥n media-alta</li>
      <li>Compensado parcialmente por eliminaci√≥n de Patrimonio, Sucesiones, Transmisiones y Plusval√≠a</li>
    </ul>
  </div>
</div>

</div>

<script>
const PROFILES = [
  {
    icon: "üë∑", name: "Trabajador con SMI",
    desc: "Salario m√≠nimo interprofesional",
    employer: 21000, brutoBefore: 15876, brutoAfter: 21000,
    ssEmployee: 1008, irpfBefore: 200, irpfAfter: 5250,
    netBefore: 14700, netAfter: 15750,
    note: "Coste empresa ~21.000 ‚Ç¨. Sin cotizaciones, el bruto pasa de 15.876 ‚Ç¨ a 21.000 ‚Ç¨. IRPF al 25% = 5.250 ‚Ç¨.",
    result: "winner"
  },
  {
    icon: "üíº", name: "Asalariado medio",
    desc: "Bruto actual 25.000 ‚Ç¨",
    employer: 33000, brutoBefore: 25000, brutoAfter: 33000,
    ssEmployee: 1588, irpfBefore: 3800, irpfAfter: 12150,
    netBefore: 19600, netAfter: 20850,
    note: "Coste empresa ~33.000 ‚Ç¨. Cotizaciones eliminadas. IRPF: 25% √ó 20.000 + 55% √ó 13.000 = 12.150 ‚Ç¨.",
    result: "winner"
  },
  {
    icon: "üìä", name: "Buen sueldo",
    desc: "Coste empresa 40.000 ‚Ç¨ (bruto actual ~30.000 ‚Ç¨)",
    employer: 40000, brutoBefore: 30000, brutoAfter: 40000,
    ssEmployee: 1900, irpfBefore: 7500, irpfAfter: 16000,
    netBefore: 20600, netAfter: 24000,
    note: "Ejemplo del programa. IRPF actual 7.500 ‚Ç¨ + SS empleado 1.900 ‚Ç¨. Nuevo: IRPF 16.000 ‚Ç¨, cero cotizaciones.",
    result: "winner"
  },
  {
    icon: "üè¢", name: "Sueldo alto",
    desc: "Bruto actual 60.000 ‚Ç¨",
    employer: 77000, brutoBefore: 60000, brutoAfter: 77000,
    ssEmployee: 3597, irpfBefore: 14800, irpfAfter: 36350,
    netBefore: 41600, netAfter: 40650,
    note: "Pierde ~950 ‚Ç¨ en renta neta. Compensado por eliminaci√≥n de Patrimonio, Sucesiones, Transmisiones Patrimoniales y Plusval√≠a Municipal.",
    result: "loser"
  },
  {
    icon: "üöÄ", name: "Aut√≥nomo nuevo",
    desc: "Facturaci√≥n 12.000 ‚Ç¨, gastos 2.000 ‚Ç¨",
    employer: null, brutoBefore: 12000, brutoAfter: 12000,
    ssEmployee: 3600, irpfBefore: 0, irpfAfter: 2500,
    netBefore: 6400, netAfter: 7500,
    note: "Hoy paga cuota SS ~3.600 ‚Ç¨/a√±o aunque apenas facture. Con el programa: sin cuota, SL pass-through. IRPF 25% √ó 10.000 ‚Ç¨ (beneficio) = 2.500 ‚Ç¨.",
    result: "winner"
  },
  {
    icon: "üîß", name: "Aut√≥nomo establecido",
    desc: "Facturaci√≥n 40.000 ‚Ç¨, gastos 8.000 ‚Ç¨",
    employer: null, brutoBefore: 40000, brutoAfter: 40000,
    ssEmployee: 5000, irpfBefore: 4000, irpfAfter: 11600,
    netBefore: 23000, netAfter: 20400,
    note: "SL pass-through. Beneficio 32.000 ‚Ç¨, IRPF 11.600 ‚Ç¨. Pierde la deducci√≥n favorable del r√©gimen actual pero elimina cuota y carga administrativa del RETA.",
    result: "loser"
  },
  {
    icon: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", name: "Familia con 2 hijos",
    desc: "Dos sueldos de 25.000 ‚Ç¨ bruto cada uno",
    employer: 66000, brutoBefore: 50000, brutoAfter: 66000,
    ssEmployee: 3176, irpfBefore: 6600, irpfAfter: 8100,
    netBefore: 40200, netAfter: 57900,
    note: "Cada progenitor aplica la exenci√≥n de 2/3 de la cuota (2 hijos), topada a 2 √ó SMI. ~16.000 ‚Ç¨ de la ganancia proceden de la transparencia salarial (SS empresa ‚Üí bruto). ~1.700 ‚Ç¨ de la exenci√≥n por hijos.",
    result: "winner"
  },
  {
    icon: "üßì", name: "Pensionista medio",
    desc: "Pensi√≥n 1.440 ‚Ç¨/mes (20.160 ‚Ç¨/a√±o)",
    employer: null, brutoBefore: 20160, brutoAfter: null,
    ssEmployee: 0, irpfBefore: 2860, irpfAfter: null,
    netBefore: 17300, netAfter: 17300,
    note: "Neutralidad fiscal: la pensi√≥n se ajusta al alza para que el neto sea id√©ntico. Sin copago farmac√©utico (ahorro de 500-1.500 ‚Ç¨/a√±o con medicaci√≥n cr√≥nica). Ganancias patrimoniales al 0% (25+ a√±os cotizados). Sin Sucesiones ni Donaciones. Factura el√©ctrica ‚àí15-25%. Jubilaci√≥n a 65.",
    result: "neutral"
  },
  {
    icon: "üë¥", name: "Pensionista m√≠nimo",
    desc: "Pensi√≥n ~750 ‚Ç¨/mes (10.500 ‚Ç¨/a√±o)",
    employer: null, brutoBefore: 10500, brutoAfter: null,
    ssEmployee: 0, irpfBefore: 100, irpfAfter: null,
    netBefore: 10400, netAfter: 10400,
    note: "Mismo neto tras neutralidad fiscal. Revalorizaci√≥n al IPC. Sin copago farmac√©utico (+500-1.500 ‚Ç¨/a√±o). Ganancias patrimoniales al 0%. Sin Sucesiones. Factura el√©ctrica ‚àí15-25%. Jubilaci√≥n a 65.",
    result: "neutral"
  },
  {
    icon: "‚ôø", name: "Persona con discapacidad >30%",
    desc: "Bruto actual 25.000 ‚Ç¨",
    employer: 33000, brutoBefore: 25000, brutoAfter: 33000,
    ssEmployee: 1588, irpfBefore: 2800, irpfAfter: 0,
    netBefore: 20600, netAfter: 33000,
    note: "Exenci√≥n total del IRPF. El bruto pasa de 25.000 ‚Ç¨ a 33.000 ‚Ç¨ (transparencia salarial) y tributa al 0%.",
    result: "winner"
  }
];

const RIGHTS = [
  ["Sanidad", "17 sistemas auton√≥micos, copago farmac√©utico, recetas no interoperables", "SNS √∫nico nacional, sin copago, receta electr√≥nica e historial centralizado"],
  ["Educaci√≥n", "Curr√≠culos distintos por CCAA, matr√≠cula universitaria ~1.500 ‚Ç¨/a√±o", "Curr√≠culo √∫nico nacional, universidad gratuita (pr√©stamo al 0%, repago en 20 a√±os)"],
  ["Guarder√≠a 0-3", "~300-600 ‚Ç¨/mes en privada, plazas p√∫blicas escasas", "Universal y gratuita"],
  ["Permiso parental", "16 semanas cada progenitor", "26 semanas cada progenitor ‚Äî el m√°s extenso de Europa occidental"],
  ["Compra de vivienda", "ITP 6-10% + AJD ~1,5% + plusval√≠a = 15.000-23.000 ‚Ç¨ en impuestos sobre 200.000 ‚Ç¨", "0 ‚Ç¨ en impuestos de transmisi√≥n"],
  ["Herencia familiar", "Impuesto de Sucesiones (variable por CCAA, 0-34%)", "0 ‚Ç¨"],
  ["Factura el√©ctrica", "~100 ‚Ç¨/mes de media", "~75-85 ‚Ç¨/mes (‚àí15 a ‚àí25%)"],
  ["Jubilaci√≥n", "66-67 a√±os (edad creciente)", "65 a√±os"],
  ["Aut√≥nomos", "Cuota mensual obligatoria + RETA + tr√°mites trimestrales de SS", "Sin cuota, sin RETA, facturaci√≥n libre"],
  ["Administraci√≥n", "Certificados f√≠sicos, desplazamientos, 17 sistemas auton√≥micos", "100% digital, registro √∫nico, domicilio √∫nico, cero certificados"],
  ["Copago farmac√©utico", "0-60% seg√∫n renta y situaci√≥n", "0% para todos"]
];

/* ‚îÄ‚îÄ Render bar chart ‚îÄ‚îÄ */
const maxNet = Math.max(...PROFILES.map(p => Math.max(p.netBefore, p.netAfter)));
const barHTML = PROFILES.map(p => {
  const diff = p.netAfter - p.netBefore;
  const pct = diff !== 0 ? ((diff / p.netBefore) * 100) : 0;
  const sign = diff > 0 ? "+" : diff < 0 ? "" : "";
  const cls = diff > 0 ? "positive" : diff < 0 ? "negative" : "neutral";
  const wBefore = ((p.netBefore / maxNet) * 100).toFixed(1);
  const wAfter = ((p.netAfter / maxNet) * 100).toFixed(1);
  const diffStr = diff !== 0
    ? `${sign}${diff.toLocaleString("es-ES")} ‚Ç¨ (${sign}${pct.toFixed(0)}%)`
    : p.name.includes("m√≠nimo") ? "0 (revalorizaci√≥n IPC)" : "0 (neutralidad fiscal)";
  return `<div class="bar-row">
    <div class="bar-label">${p.name}</div>
    <div class="bar-track">
      <div class="bar-fill-before" style="width:${wBefore}%"></div>
      <div class="bar-fill-after ${cls}" style="width:${wAfter}%"></div>
    </div>
    <div class="bar-value ${cls}">${diffStr}</div>
  </div>`;
}).join("");
document.getElementById("bar-chart").innerHTML = barHTML;

/* ‚îÄ‚îÄ Render profile cards ‚îÄ‚îÄ */
const fmt = n => n != null ? n.toLocaleString("es-ES") + " ‚Ç¨" : "‚Äî";
const cardsHTML = PROFILES.map(p => {
  const diff = p.netAfter - p.netBefore;
  const pct = p.netBefore > 0 ? ((diff / p.netBefore) * 100).toFixed(0) : "0";
  const sign = diff > 0 ? "+" : "";
  let badgeCls, badgeText;
  if (diff > 0) { badgeCls = "badge-green"; badgeText = `${sign}${fmt(diff)}`; }
  else if (diff < 0) { badgeCls = "badge-red"; badgeText = `${fmt(diff)}`; }
  else { badgeCls = "badge-amber"; badgeText = "= Mismo neto"; }

  const rows = [];
  if (p.employer) rows.push(["Coste empresa", fmt(p.employer), fmt(p.employer)]);
  rows.push(["Salario / ingreso bruto", fmt(p.brutoBefore), p.brutoAfter ? fmt(p.brutoAfter) : "Ajustado"]);
  if (p.ssEmployee > 0) rows.push(["Cotizaciones SS", fmt(p.ssEmployee), "0 ‚Ç¨"]);
  rows.push(["IRPF", fmt(p.irpfBefore), p.irpfAfter != null ? fmt(p.irpfAfter) : "Ajustado"]);
  rows.push(["Neto anual", fmt(p.netBefore), fmt(p.netAfter)]);

  const rowsHTML = rows.map(([label, before, after], i) => {
    const isLast = i === rows.length - 1;
    const style = isLast ? ' style="font-weight:700;font-size:12px;border-bottom:none;padding-top:8px;border-top:1px solid var(--border)"' : '';
    return `<div class="profile-row"${style}>
      <span class="label">${label}</span>
      <span class="val">${isLast ? '' : '<span class="before">' + before + '</span> ‚Üí '}<span class="after">${isLast ? '<span class="before">' + before + '</span> ‚Üí ' + after : after}</span></span>
    </div>`;
  }).join("");

  return `<div class="profile-card ${p.result}">
    <div class="profile-header">
      <div>
        <div style="display:flex;align-items:center"><span class="profile-icon">${p.icon}</span><span class="profile-name">${p.name}</span></div>
        <div class="profile-desc">${p.desc}</div>
      </div>
      <div class="profile-badge ${badgeCls}">${badgeText}</div>
    </div>
    ${rowsHTML}
    <div class="profile-note">${p.note}</div>
  </div>`;
}).join("");
document.getElementById("profiles").innerHTML = cardsHTML;

/* ‚îÄ‚îÄ Render rights table ‚îÄ‚îÄ */
const rightsHTML = RIGHTS.map(([concept, before, after]) =>
  `<tr><td>${concept}</td><td>${before}</td><td>${after}</td></tr>`
).join("");
document.getElementById("rights-body").innerHTML = rightsHTML;
</script>
</body>
</html>
